services:
  input-provider:
    build:
      context: .
      dockerfile: services/input_provider/Dockerfile
    ports:
      - "18081:8080"   # HTTP control interface
      - "50051:50051"  # gRPC data interface
    environment:
      - PORT=8080
      - GRPC_PORT=50051
      - GRPC_HOST=input-provider

  data-generator:
    build:
      context: .
      dockerfile: services/data_generator/Dockerfile
    ports:
      - "18082:8080"   # HTTP control interface
      - "50052:50051"  # gRPC data interface
    environment:
      - PORT=8080
      - GRPC_PORT=50051
      - GRPC_HOST=data-generator

  data-analyzer:
    build:
      context: .
      dockerfile: services/data_analyzer/Dockerfile
    ports:
      - "18083:8080"   # HTTP control interface
      - "50053:50051"  # gRPC data interface
    environment:
      - PORT=8080
      - GRPC_PORT=50051
      - GRPC_HOST=data-analyzer

  report-generator:
    build:
      context: .
      dockerfile: services/report_generator/Dockerfile
    ports:
      - "18084:8080"   # HTTP control interface
      - "50054:50051"  # gRPC data interface
    environment:
      - PORT=8080
      - GRPC_PORT=50051
      - GRPC_HOST=report-generator
