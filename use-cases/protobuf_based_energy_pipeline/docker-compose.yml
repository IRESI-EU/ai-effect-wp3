services:
  input_provider:
    build:
      context: .
      dockerfile: services/input_provider/Dockerfile
    container_name: protobuf_input_provider
    environment:
      - GRPC_PORT=50051
    ports:
      - "50050:50051"
    networks:
      - energy_pipeline_net

  data_generator:
    build:
      context: .
      dockerfile: services/data_generator/Dockerfile
    container_name: protobuf_data_generator
    environment:
      - GRPC_PORT=50051
    ports:
      - "50051:50051"
    networks:
      - energy_pipeline_net
    depends_on:
      - input_provider

  data_analyzer:
    build:
      context: .
      dockerfile: services/data_analyzer/Dockerfile
    container_name: protobuf_data_analyzer
    environment:
      - GRPC_PORT=50051
    ports:
      - "50052:50051"
    networks:
      - energy_pipeline_net
    depends_on:
      - data_generator

  report_generator:
    build:
      context: .
      dockerfile: services/report_generator/Dockerfile
    container_name: protobuf_report_generator
    environment:
      - GRPC_PORT=50051
    ports:
      - "50053:50051"
    networks:
      - energy_pipeline_net
    depends_on:
      - data_analyzer

networks:
  energy_pipeline_net:
    driver: bridge